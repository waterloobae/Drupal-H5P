var H5P=H5P||{};(function($){H5P.Image=function(params,id,extras){H5P.EventDispatcher.call(this);this.extras=extras;if(params.file===undefined||!(params.file instanceof Object))this.placeholder=true;else{this.source=H5P.getPath(params.file.path,id);this.width=params.file.width;this.height=params.file.height;}this.alt=(!params.decorative&&params.alt!==undefined)?this.stripHTML(this.htmlDecode(params.alt)):'';if(params.title!==undefined)this.title=this.stripHTML(this.htmlDecode(params.title));};H5P.Image.prototype=Object.create(H5P.EventDispatcher.prototype);H5P.Image.prototype.constructor=H5P.Image;H5P.Image.prototype.attach=function($wrapper){var self=this;var source=this.source;if(self.$img===undefined)if(self.placeholder)self.$img=$('<div>',{width:'100%',height:'100%',class:'h5p-placeholder',title:this.title===undefined?'':this.title,on:{load:function(){self.trigger('loaded');}}});else self.$img=$('<img>',{width:'100%',height:'100%',src:source,alt:this.alt,title:this.title===undefined?'':this.title,on:{load:function(){self.trigger('loaded');}}});$wrapper.addClass('h5p-image').html(self.$img);};H5P.Image.prototype.htmlDecode=function(input){const dparser=new DOMParser().parseFromString(input,'text/html');return dparser.documentElement.textContent;};H5P.Image.prototype.stripHTML=function(html){const div=document.createElement('div');div.innerHTML=html;return div.textContent||div.innerText||'';};return H5P.Image;}(H5P.jQuery));;
var H5P=H5P||{};H5P.Transition=(function($){Transition={};Transition.transitionEndEventNames={'WebkitTransition':'webkitTransitionEnd','transition':'transitionend','MozTransition':'transitionend','OTransition':'oTransitionEnd','msTransition':'MSTransitionEnd'};Transition.cache=[];Transition.getVendorPropertyName=function(prop){if(Transition.cache[prop]!==undefined)return Transition.cache[prop];var div=document.createElement('div');if(prop in div.style)Transition.cache[prop]=prop;else{var prefixes=['Moz','Webkit','O','ms'];var prop_=prop.charAt(0).toUpperCase()+prop.substr(1);if(prop in div.style)Transition.cache[prop]=prop;else for(var i=0;i<prefixes.length;++i){var vendorProp=prefixes[i]+prop_;if(vendorProp in div.style){Transition.cache[prop]=vendorProp;break;}}}return Transition.cache[prop];};Transition.getTransitionEndEventName=function(){return Transition.transitionEndEventNames[Transition.getVendorPropertyName('transition')]||undefined;};Transition.onTransitionEnd=function($element,callback,timeout){timeout=timeout||1000;Transition.transitionEndEventName=Transition.transitionEndEventName||Transition.getTransitionEndEventName();var callbackCalled=false;var doCallback=function(){if(callbackCalled)return;$element.off(Transition.transitionEndEventName,callback);callbackCalled=true;clearTimeout(timer);callback();};var timer=setTimeout(function(){doCallback();},timeout);$element.on(Transition.transitionEndEventName,function(){doCallback();});};var runSequence=function(transitions,index){if(index>=transitions.length)return;var transition=transitions[index];H5P.Transition.onTransitionEnd(transition.$element,function(){if(transition.end)transition.end();if(transition.break!==true)runSequence(transitions,index+1);},transition.timeout||undefined);};Transition.sequence=function(transitions){runSequence(transitions,0);};return Transition;})(H5P.jQuery);;
var H5P=H5P||{};H5P.JoubelHelpTextDialog=(function($){var numInstances=0;function JoubelHelpTextDialog(header,message,closeButtonTitle){H5P.EventDispatcher.call(this);var self=this;numInstances++;var headerId='joubel-help-text-header-'+numInstances;var helpTextId='joubel-help-text-body-'+numInstances;var $helpTextDialogBox=$('<div>',{'class':'joubel-help-text-dialog-box','role':'dialog','aria-labelledby':headerId,'aria-describedby':helpTextId});$('<div>',{'class':'joubel-help-text-dialog-background'}).appendTo($helpTextDialogBox);var $helpTextDialogContainer=$('<div>',{'class':'joubel-help-text-dialog-container'}).appendTo($helpTextDialogBox);$('<div>',{'class':'joubel-help-text-header','id':headerId,'role':'header','html':header}).appendTo($helpTextDialogContainer);$('<div>',{'class':'joubel-help-text-body','id':helpTextId,'html':message,'role':'document','tabindex':0}).appendTo($helpTextDialogContainer);var handleClose=function(){$helpTextDialogBox.remove();self.trigger('closed');};var $closeButton=$('<div>',{'class':'joubel-help-text-remove','role':'button','title':closeButtonTitle,'tabindex':1,'click':handleClose,'keydown':function(event){if([32,13].indexOf(event.which)!==-1){event.preventDefault();handleClose();}}}).appendTo($helpTextDialogContainer);self.getElement=function(){return $helpTextDialogBox;};self.focus=function(){$closeButton.focus();};}JoubelHelpTextDialog.prototype=Object.create(H5P.EventDispatcher.prototype);JoubelHelpTextDialog.prototype.constructor=JoubelHelpTextDialog;return JoubelHelpTextDialog;}(H5P.jQuery));;
var H5P=H5P||{};H5P.JoubelMessageDialog=(function($){function JoubelMessageDialog($container,message){var timeout;var removeDialog=function(){$warning.remove();clearTimeout(timeout);$container.off('click.messageDialog');};var $warning=$('<div/>',{'class':'joubel-message-dialog',text:message}).appendTo($container);timeout=setTimeout(removeDialog,3000);$container.on('click.messageDialog',removeDialog);return $warning;}return JoubelMessageDialog;})(H5P.jQuery);;
var H5P=H5P||{};H5P.JoubelProgressCircle=(function($){function ProgressCircle(number,progressColor,fillColor,backgroundColor){progressColor=progressColor||'#1a73d9';fillColor=fillColor||'#f0f0f0';backgroundColor=backgroundColor||'#ffffff';var progressColorRGB=this.hexToRgb(progressColor);try{number=Number(number);if(number==='')throw 'is empty';if(isNaN(number))throw 'is not a number';}catch(e){number='err';}if(number>100)number=100;var progressColorString='rgb('+parseInt(progressColorRGB.r,10)+','+parseInt(progressColorRGB.g,10)+','+parseInt(progressColorRGB.b,10)+')';var $wrapper=$('<div/>',{'class':"joubel-progress-circle-wrapper"});var $activeBorder=$('<div/>',{'class':"joubel-progress-circle-active-border"}).appendTo($wrapper);var $backgroundCircle=$('<div/>',{'class':"joubel-progress-circle-circle"}).appendTo($activeBorder);$('<span/>',{'text':number+'%','class':"joubel-progress-circle-percentage"}).appendTo($backgroundCircle);var deg=number*3.6;if(deg<=180)$activeBorder.css('background-image','linear-gradient('+(90+deg)+'deg, transparent 50%, '+fillColor+' 50%),'+'linear-gradient(90deg, '+fillColor+' 50%, transparent 50%)').css('border','2px solid'+backgroundColor).css('background-color',progressColorString);else $activeBorder.css('background-image','linear-gradient('+(deg-90)+'deg, transparent 50%, '+progressColorString+' 50%),'+'linear-gradient(90deg, '+fillColor+' 50%, transparent 50%)').css('border','2px solid'+backgroundColor).css('background-color',progressColorString);this.$activeBorder=$activeBorder;this.$backgroundCircle=$backgroundCircle;this.$wrapper=$wrapper;this.initResizeFunctionality();return $wrapper;}ProgressCircle.prototype.initResizeFunctionality=function(){var self=this;$(window).resize(function(){setTimeout(function(){self.resize();});});setTimeout(function(){self.resize();},0);};ProgressCircle.prototype.resize=function(){var $parent=this.$wrapper.parent();if($parent!==undefined&&$parent){var fontSize=parseInt($parent.css('font-size'),10);var fontSizeMultiplum=3.75;var progressCircleWidthPx=parseInt((fontSize/4.5),10)%2===0?parseInt((fontSize/4.5),10)+4:parseInt((fontSize/4.5),10)+5;var progressCircleOffset=progressCircleWidthPx/2;var width=fontSize*fontSizeMultiplum;var height=fontSize*fontSizeMultiplum;this.$activeBorder.css({'width':width,'height':height});this.$backgroundCircle.css({'width':width-progressCircleWidthPx,'height':height-progressCircleWidthPx,'top':progressCircleOffset,'left':progressCircleOffset});}};ProgressCircle.prototype.hexToRgb=function(hex){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null;};return ProgressCircle;}(H5P.jQuery));;
var H5P=H5P||{};H5P.SimpleRoundedButton=(function($){function SimpleRoundedButton(text){var $simpleRoundedButton=$('<div>',{'class':'joubel-simple-rounded-button','title':text,'role':'button','tabindex':'0'}).keydown(function(e){if([32,13].indexOf(e.which)!==-1){$(this).click();e.preventDefault();}});$('<span>',{'class':'joubel-simple-rounded-button-text','html':text}).appendTo($simpleRoundedButton);return $simpleRoundedButton;}return SimpleRoundedButton;}(H5P.jQuery));;
var H5P=H5P||{};H5P.JoubelSpeechBubble=(function($){var $currentSpeechBubble;var $currentContainer;var $tail;var $innerTail;var removeSpeechBubbleTimeout;var currentMaxWidth;var DEFAULT_MAX_WIDTH=400;var iDevice=navigator.userAgent.match(/iPod|iPhone|iPad/g)?true:false;function JoubelSpeechBubble($container,text,maxWidth){maxWidth=maxWidth||DEFAULT_MAX_WIDTH;currentMaxWidth=maxWidth;$currentContainer=$container;this.isCurrent=function($tip){return $tip.is($currentContainer);};this.remove=function(){remove();};var fadeOutSpeechBubble=function($speechBubble){if(!$speechBubble)return;clearTimeout(removeSpeechBubbleTimeout);$speechBubble.removeClass('show');setTimeout(function(){if($speechBubble){$speechBubble.remove();$speechBubble=undefined;}},500);};if($currentSpeechBubble!==undefined)remove();var $h5pContainer=getH5PContainer($container);fadeOutSpeechBubble($currentSpeechBubble);$tail=$('<div class="joubel-speech-bubble-tail"></div>');$innerTail=$('<div class="joubel-speech-bubble-inner-tail"></div>');var $innerBubble=$('<div class="joubel-speech-bubble-inner">'+'<div class="joubel-speech-bubble-text">'+text+'</div>'+'</div>').prepend($innerTail);$currentSpeechBubble=$('<div class="joubel-speech-bubble" aria-live="assertive">').append([$tail,$innerBubble]).appendTo($h5pContainer);setTimeout(function(){$currentSpeechBubble.addClass('show');},0);position($currentSpeechBubble,$currentContainer,maxWidth,$tail,$innerTail);H5P.$body.on('mousedown.speechBubble',handleOutsideClick);H5P.$window.on('resize','',handleResize);$container.parents('.h5p-dialog').on('mousedown.speechBubble',handleOutsideClick);if(iDevice)H5P.$body.css('cursor','pointer');return this;}H5P.externalDispatcher.on('domHidden',function(event){if($currentSpeechBubble!==undefined&&event.data.$dom.find($currentContainer).length!==0)remove();});function getH5PContainer($container){var $h5pContainer=$container.closest('.h5p-frame');if(!$h5pContainer.length)$h5pContainer=$container.closest('.h5p-container');return $h5pContainer;}function handleResize(){position($currentSpeechBubble,$currentContainer,currentMaxWidth,$tail,$innerTail);}function position($currentSpeechBubble,$container,maxWidth,$tail,$innerTail){var $h5pContainer=getH5PContainer($container);var offset=getOffsetBetween($h5pContainer,$container);var direction=(offset.bottom>offset.top?'bottom':'top');var tipWidth=offset.outerWidth*0.9;var bubbleWidth=tipWidth>maxWidth?maxWidth:tipWidth;var bubblePosition=getBubblePosition(bubbleWidth,offset);var tailPosition=getTailPosition(bubbleWidth,bubblePosition,offset,$container.width());var fontSize=16;$currentSpeechBubble.css(bubbleCSS(direction,bubbleWidth,bubblePosition,fontSize));var preparedTailCSS=tailCSS(direction,tailPosition);$tail.css(preparedTailCSS);$innerTail.css(preparedTailCSS);}var remove=function(){H5P.$body.off('mousedown.speechBubble');H5P.$window.off('resize','',handleResize);$currentContainer.parents('.h5p-dialog').off('mousedown.speechBubble');if(iDevice)H5P.$body.css('cursor','');if($currentSpeechBubble!==undefined){$currentSpeechBubble.removeClass('show');clearTimeout(removeSpeechBubbleTimeout);removeSpeechBubbleTimeout=setTimeout(function(){$currentSpeechBubble.remove();$currentSpeechBubble=undefined;},500);}};function handleOutsideClick(event){if(event.target===$currentContainer[0])return;remove();$currentContainer=undefined;}function getBubblePosition(bubbleWidth,offset){var bubblePosition={};var tailOffset=9;var widthOffset=bubbleWidth/2;bubblePosition.top=offset.top+offset.innerHeight;bubblePosition.bottom=offset.bottom+offset.innerHeight+tailOffset;if(offset.left<widthOffset)bubblePosition.left=3;else if((offset.left+widthOffset)>offset.outerWidth)bubblePosition.left=offset.outerWidth-bubbleWidth-3;else bubblePosition.left=offset.left-widthOffset+(offset.innerWidth/2);return bubblePosition;}function getTailPosition(bubbleWidth,bubblePosition,offset,iconWidth){var tailPosition={};var leftBoundary=9;var rightBoundary=bubbleWidth-20;tailPosition.left=offset.left-bubblePosition.left+(iconWidth/2)-6;if(tailPosition.left<leftBoundary)tailPosition.left=leftBoundary;if(tailPosition.left>rightBoundary)tailPosition.left=rightBoundary;tailPosition.top=-6;tailPosition.bottom=-6;return tailPosition;}function bubbleCSS(direction,width,position,fontSize){if(direction==='top')return {width:width+'px',bottom:position.bottom+'px',left:position.left+'px',fontSize:fontSize+'px',top:''};else return {width:width+'px',top:position.top+'px',left:position.left+'px',fontSize:fontSize+'px',bottom:''};}function tailCSS(direction,position){if(direction==='top')return {bottom:position.bottom+'px',left:position.left+'px',top:''};else return {top:position.top+'px',left:position.left+'px',bottom:''};}function getOffsetBetween($outer,$inner){var outer=$outer[0].getBoundingClientRect();var inner=$inner[0].getBoundingClientRect();return {top:inner.top-outer.top,right:outer.right-inner.right,bottom:outer.bottom-inner.bottom,left:inner.left-outer.left,innerWidth:inner.width,innerHeight:inner.height,outerWidth:outer.width,outerHeight:outer.height};}return JoubelSpeechBubble;})(H5P.jQuery);;
var H5P=H5P||{};H5P.JoubelThrobber=(function($){function JoubelThrobber(){var $throbber=$('<div/>',{'class':'h5p-throbber'});return $throbber;}return JoubelThrobber;}(H5P.jQuery));;
H5P.JoubelTip=(function($){var $conv=$('<div/>');function JoubelTip(tipHtml,behaviour){var speechBubble;var tipText=$conv.html(tipHtml).text().trim();if(tipText==='')return;behaviour=$.extend({tipLabel:tipText,helpIcon:false,showSpeechBubble:true,tabcontrol:false},behaviour);var $tipButton=$('<div/>',{class:'joubel-tip-container'+(behaviour.showSpeechBubble?'':' be-quiet'),'aria-label':behaviour.tipLabel,'aria-expanded':false,role:'button',tabindex:(behaviour.tabcontrol?-1:0),click:function(event){toggleSpeechBubble();event.preventDefault();},keydown:function(event){if(event.which===32||event.which===13){toggleSpeechBubble();event.stopPropagation();event.preventDefault();}else toggleSpeechBubble(false);},html:'<span class="joubel-icon-tip-normal '+(behaviour.helpIcon?' help-icon':'')+'">'+'<span class="h5p-icon-shadow"></span>'+'<span class="h5p-icon-speech-bubble"></span>'+'<span class="h5p-icon-info"></span>'+'</span>'});const $tipAnnouncer=$('<div>',{'class':'hidden-but-read','aria-live':'polite',appendTo:$tipButton});var toggleSpeechBubble=function(force){if(speechBubble!==undefined&&speechBubble.isCurrent($tipButton)){speechBubble.remove();speechBubble=undefined;$tipButton.attr('aria-expanded',false);$tipAnnouncer.html('');}else{if(force!==false&&behaviour.showSpeechBubble){speechBubble=H5P.JoubelSpeechBubble($tipButton,tipHtml);$tipButton.attr('aria-expanded',true);$tipAnnouncer.html(tipHtml);}}};return $tipButton;}return JoubelTip;})(H5P.jQuery);;
var H5P=H5P||{};H5P.JoubelSlider=(function($){function JoubelSlider(params){H5P.EventDispatcher.call(this);this.$slider=$('<div>',$.extend({'class':'h5p-joubel-ui-slider'},params));this.$slides=[];this.currentIndex=0;this.numSlides=0;}JoubelSlider.prototype=Object.create(H5P.EventDispatcher.prototype);JoubelSlider.prototype.constructor=JoubelSlider;JoubelSlider.prototype.addSlide=function($content){$content.addClass('h5p-joubel-ui-slide').css({'left':(this.numSlides*100)+'%'});this.$slider.append($content);this.$slides.push($content);this.numSlides++;if(this.numSlides===1)$content.addClass('current');};JoubelSlider.prototype.attach=function($container){$container.append(this.$slider);};JoubelSlider.prototype.move=function(index){var self=this;if(index===0)self.trigger('first-slide');if(index+1===self.numSlides)self.trigger('last-slide');self.trigger('move');var $previousSlide=self.$slides[this.currentIndex];H5P.Transition.onTransitionEnd(this.$slider,function(){$previousSlide.removeClass('current');self.trigger('moved');});this.$slides[index].addClass('current');var translateX='translateX('+(-index*100)+'%)';this.$slider.css({'-webkit-transform':translateX,'-moz-transform':translateX,'-ms-transform':translateX,'transform':translateX});this.currentIndex=index;};JoubelSlider.prototype.remove=function(){this.$slider.remove();};JoubelSlider.prototype.next=function(){if(this.currentIndex+1>=this.numSlides)return;this.move(this.currentIndex+1);};JoubelSlider.prototype.previous=function(){this.move(this.currentIndex-1);};JoubelSlider.prototype.first=function(){this.move(0);};JoubelSlider.prototype.last=function(){this.move(this.numSlides-1);};return JoubelSlider;})(H5P.jQuery);;
var H5P=H5P||{};H5P.JoubelScoreBar=(function($){var idCounter=0;function JoubelScoreBar(maxScore,label,helpText,scoreExplanationButtonLabel){var self=this;self.maxScore=maxScore;self.score=0;idCounter++;self.STAR_MARKUP='<svg tabindex="-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 63.77 53.87" aria-hidden="true" focusable="false">'+'<title>star</title>'+'<filter tabindex="-1" id="h5p-joubelui-score-bar-star-inner-shadow-'+idCounter+'" x0="-50%" y0="-50%" width="200%" height="200%">'+'<feGaussianBlur in="SourceAlpha" stdDeviation="3" result="blur"></feGaussianBlur>'+'<feOffset dy="2" dx="4"></feOffset>'+'<feComposite in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowDiff"></feComposite>'+'<feFlood flood-color="#ffe95c" flood-opacity="1"></feFlood>'+'<feComposite in2="shadowDiff" operator="in"></feComposite>'+'<feComposite in2="SourceGraphic" operator="over" result="firstfilter"></feComposite>'+'<feGaussianBlur in="firstfilter" stdDeviation="3" result="blur2"></feGaussianBlur>'+'<feOffset dy="-2" dx="-4"></feOffset>'+'<feComposite in2="firstfilter" operator="arithmetic" k2="-1" k3="1" result="shadowDiff"></feComposite>'+'<feFlood flood-color="#ffe95c" flood-opacity="1"></feFlood>'+'<feComposite in2="shadowDiff" operator="in"></feComposite>'+'<feComposite in2="firstfilter" operator="over"></feComposite>'+'</filter>'+'<path tabindex="-1" class="h5p-joubelui-score-bar-star-shadow" d="M35.08,43.41V9.16H20.91v0L9.51,10.85,9,10.93C2.8,12.18,0,17,0,21.25a11.22,11.22,0,0,0,3,7.48l8.73,8.53-1.07,6.16Z"/>'+'<g tabindex="-1">'+'<path tabindex="-1" class="h5p-joubelui-score-bar-star-border" d="M61.36,22.8,49.72,34.11l2.78,16a2.6,2.6,0,0,1,.05.64c0,.85-.37,1.6-1.33,1.6A2.74,2.74,0,0,1,49.94,52L35.58,44.41,21.22,52a2.93,2.93,0,0,1-1.28.37c-.91,0-1.33-.75-1.33-1.6,0-.21.05-.43.05-.64l2.78-16L9.8,22.8A2.57,2.57,0,0,1,9,21.25c0-1,1-1.33,1.81-1.49l16.07-2.35L34.09,2.83c.27-.59.85-1.33,1.55-1.33s1.28.69,1.55,1.33l7.21,14.57,16.07,2.35c.75.11,1.81.53,1.81,1.49A3.07,3.07,0,0,1,61.36,22.8Z"/>'+'<path tabindex="-1" class="h5p-joubelui-score-bar-star-fill" d="M61.36,22.8,49.72,34.11l2.78,16a2.6,2.6,0,0,1,.05.64c0,.85-.37,1.6-1.33,1.6A2.74,2.74,0,0,1,49.94,52L35.58,44.41,21.22,52a2.93,2.93,0,0,1-1.28.37c-.91,0-1.33-.75-1.33-1.6,0-.21.05-.43.05-.64l2.78-16L9.8,22.8A2.57,2.57,0,0,1,9,21.25c0-1,1-1.33,1.81-1.49l16.07-2.35L34.09,2.83c.27-.59.85-1.33,1.55-1.33s1.28.69,1.55,1.33l7.21,14.57,16.07,2.35c.75.11,1.81.53,1.81,1.49A3.07,3.07,0,0,1,61.36,22.8Z"/>'+'<path tabindex="-1" filter="url(#h5p-joubelui-score-bar-star-inner-shadow-'+idCounter+')" class="h5p-joubelui-score-bar-star-fill-full-score" d="M61.36,22.8,49.72,34.11l2.78,16a2.6,2.6,0,0,1,.05.64c0,.85-.37,1.6-1.33,1.6A2.74,2.74,0,0,1,49.94,52L35.58,44.41,21.22,52a2.93,2.93,0,0,1-1.28.37c-.91,0-1.33-.75-1.33-1.6,0-.21.05-.43.05-.64l2.78-16L9.8,22.8A2.57,2.57,0,0,1,9,21.25c0-1,1-1.33,1.81-1.49l16.07-2.35L34.09,2.83c.27-.59.85-1.33,1.55-1.33s1.28.69,1.55,1.33l7.21,14.57,16.07,2.35c.75.11,1.81.53,1.81,1.49A3.07,3.07,0,0,1,61.36,22.8Z"/>'+'</g>'+'</svg>';self.appendTo=function($wrapper){self.$scoreBar.appendTo($wrapper);};var createLabel=function(score){if(!label)return '';return label.replace(':num',score).replace(':total',self.maxScore);};var createHtml=function(){self.$scoreBar=$('<div>',{'class':'h5p-joubelui-score-bar'});var $visuals=$('<div>',{'class':'h5p-joubelui-score-bar-visuals',appendTo:self.$scoreBar});self.$progressWrapper=$('<div>',{'class':'h5p-joubelui-score-bar-progress-wrapper',appendTo:$visuals});self.$progress=$('<div>',{'class':'h5p-joubelui-score-bar-progress','html':createLabel(self.score),appendTo:self.$progressWrapper});$('<div>',{'class':'h5p-joubelui-score-bar-star',html:self.STAR_MARKUP}).appendTo($visuals);var $numerics=$('<div>',{'class':'h5p-joubelui-score-numeric',appendTo:self.$scoreBar,'aria-hidden':true});self.$scoreCounter=$('<span>',{'class':'h5p-joubelui-score-number h5p-joubelui-score-number-counter',text:0,appendTo:$numerics});$('<span>',{'class':'h5p-joubelui-score-number-separator',text:'/',appendTo:$numerics});self.$maxScore=$('<span>',{'class':'h5p-joubelui-score-number h5p-joubelui-score-max',text:self.maxScore,appendTo:$numerics});if(helpText){H5P.JoubelUI.createTip(helpText,{tipLabel:scoreExplanationButtonLabel?scoreExplanationButtonLabel:helpText,helpIcon:true}).appendTo(self.$scoreBar);self.$scoreBar.addClass('h5p-score-bar-has-help');}};self.setScore=function(score){if(score===self.score)return;self.score=score>self.maxScore?self.maxScore:score;self.updateVisuals();};self.incrementScore=function(incrementBy){self.setScore(self.score+(incrementBy||1));};self.setMaxScore=function(maxScore){self.maxScore=maxScore;};self.updateVisuals=function(){self.$progress.html(createLabel(self.score));self.$scoreCounter.text(self.score);self.$maxScore.text(self.maxScore);setTimeout(function(){self.$progress.css({width:((self.score/self.maxScore)*100)+'%'});H5P.Transition.onTransitionEnd(self.$progress,function(){self.$scoreBar.toggleClass('h5p-joubelui-score-bar-full-score',self.score===self.maxScore);self.$scoreBar.toggleClass('h5p-joubelui-score-bar-animation-active',self.score===self.maxScore);self.$scoreBar.one("animationend",function(){self.$scoreBar.removeClass("h5p-joubelui-score-bar-animation-active");});},600);},300);};self.reset=function(){self.$scoreBar.removeClass('h5p-joubelui-score-bar-full-score');};createHtml();}return JoubelScoreBar;})(H5P.jQuery);;
var H5P=H5P||{};H5P.JoubelProgressbar=(function($){function JoubelProgressbar(steps,options){H5P.EventDispatcher.call(this);var self=this;this.options=$.extend({progressText:'Slide :num of :total'},options);this.currentStep=0;this.steps=steps;this.$progressbar=$('<div>',{'class':'h5p-joubelui-progressbar'});this.$background=$('<div>',{'class':'h5p-joubelui-progressbar-background'}).appendTo(this.$progressbar);}JoubelProgressbar.prototype=Object.create(H5P.EventDispatcher.prototype);JoubelProgressbar.prototype.constructor=JoubelProgressbar;JoubelProgressbar.prototype.updateAria=function(){var self=this;if(this.options.disableAria)return;if(!this.$currentStatus)this.$currentStatus=$('<div>',{'class':'h5p-joubelui-progressbar-slide-status-text','aria-live':'assertive'}).appendTo(this.$progressbar);var interpolatedProgressText=self.options.progressText.replace(':num',self.currentStep).replace(':total',self.steps);this.$currentStatus.html(interpolatedProgressText);};JoubelProgressbar.prototype.appendTo=function($container){this.$progressbar.appendTo($container);};JoubelProgressbar.prototype.setProgress=function(step){if(step>this.steps||step<0)return;this.currentStep=step;this.$background.css({width:((this.currentStep/this.steps)*100)+'%'});this.updateAria();};JoubelProgressbar.prototype.next=function(){this.setProgress(this.currentStep+1);};JoubelProgressbar.prototype.reset=function(){this.setProgress(0);};JoubelProgressbar.prototype.isLastStep=function(){return this.steps===this.currentStep;};return JoubelProgressbar;})(H5P.jQuery);;
var H5P=H5P||{};H5P.JoubelUI=(function($){function JoubelUI(){}JoubelUI.createTip=function(text,params){return new H5P.JoubelTip(text,params);};JoubelUI.createMessageDialog=function($container,message){return new H5P.JoubelMessageDialog($container,message);};JoubelUI.createHelpTextDialog=function(header,message,closeButtonTitle){return new H5P.JoubelHelpTextDialog(header,message,closeButtonTitle);};JoubelUI.createProgressCircle=function(number,progressColor,fillColor,backgroundColor){return new H5P.JoubelProgressCircle(number,progressColor,fillColor,backgroundColor);};JoubelUI.createThrobber=function(){return new H5P.JoubelThrobber();};JoubelUI.createSimpleRoundedButton=function(text){return new H5P.SimpleRoundedButton(text);};JoubelUI.createSlider=function(params){return new H5P.JoubelSlider(params);};JoubelUI.createScoreBar=function(maxScore,label,helpText,scoreExplanationButtonLabel){return new H5P.JoubelScoreBar(maxScore,label,helpText,scoreExplanationButtonLabel);};JoubelUI.createProgressbar=function(numSteps,options){return new H5P.JoubelProgressbar(numSteps,options);};JoubelUI.createButton=function(params){var type='button';if(params.href)type='a';else params.type='button';if(params.class)params.class+=' h5p-joubelui-button';else params.class='h5p-joubelui-button';return $('<'+type+'/>',params);};if(H5P.isFramed&&!H5P.hasiOSiframeScrollFix&&/iPad|iPhone|iPod/.test(navigator.userAgent)){H5P.hasiOSiframeScrollFix=true;var focus=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){if((this instanceof HTMLAnchorElement||this instanceof HTMLInputElement||this instanceof HTMLSelectElement||this instanceof HTMLTextAreaElement||this instanceof HTMLButtonElement||this instanceof HTMLIFrameElement||this instanceof HTMLAreaElement)&&!this.getAttribute('role'))focus.call(this);};}return JoubelUI;})(H5P.jQuery);;
H5P.Tooltip=H5P.Tooltip||function(){};H5P.Question=(function($,EventDispatcher,JoubelUI){function Question(type){var self=this;EventDispatcher.call(self);self.order=['video','image','audio','introduction','content','explanation','feedback','scorebar','buttons','read'];var sections={};var buttons={};var buttonOrder=[];var $wrapper;var clickElement;var scoreBar;var showFeedback;var buttonsToHide=[];var buttonsToShow=[];var toggleButtonsTimer;var toggleButtonsTransitionTimer;var buttonTruncationTimer;var initialized=false;var behaviour={disableFeedback:false,disableReadSpeaker:false};var imageThumb=true;var imageTransitionTimer;var sectionsIsTransitioning=false;var disableAutoPlay=false;var feedbackTransitionTimer;var $read,readText;var register=function(section,content){sections[section]={};var $e=sections[section].$element=$('<div/>',{'class':'h5p-question-'+section});if(content)$e[content instanceof $?'append':'html'](content);};var update=function(section,content){if(content instanceof $)sections[section].$element.html('').append(content);else sections[section].$element.html(content);};var insert=function(order,id,elements,$container){for(var i=0;i<order.length;i++)if(order[i]===id){while(i>0&&(elements[order[i-1]]===undefined||!elements[order[i-1]].isVisible))i--;if(i===0)elements[id].$element.prependTo($container);else elements[id].$element.insertAfter(elements[order[i-1]].$element);elements[id].isVisible=true;break;}};var makeFeedbackPopup=function(closeText){var $element=sections.feedback.$element;var $parent=sections.content.$element;var $click=(clickElement!=null?clickElement.$element:null);$element.appendTo($parent).addClass('h5p-question-popup');if(sections.scorebar)sections.scorebar.$element.appendTo($element);$parent.addClass('h5p-has-question-popup');var $tail=$('<div/>',{'class':'h5p-question-feedback-tail'}).hide().appendTo($parent);var $close=$('<div/>',{'class':'h5p-question-feedback-close','tabindex':0,'title':closeText,on:{click:function(event){$element.remove();$tail.remove();event.preventDefault();},keydown:function(event){switch(event.which){case 13:case 32:$element.remove();$tail.remove();event.preventDefault();}}}}).hide().appendTo($element);if($click!=null)if($click.hasClass('correct')){$element.addClass('h5p-question-feedback-correct');$close.show();sections.buttons.$element.hide();}else sections.buttons.$element.appendTo(sections.feedback.$element);positionFeedbackPopup($element,$click);};var positionFeedbackPopup=function($element,$click){var $container=$element.parent();var $tail=$element.siblings('.h5p-question-feedback-tail');var popupWidth=$element.outerWidth();var popupHeight=setElementHeight($element);var space=15;var disableTail=false;var positionY=$container.height()/2-popupHeight/2;var positionX=$container.width()/2-popupWidth/2;var tailX=0;var tailY=0;var tailRotation=0;if($click!=null){var clickNearTop=($click[0].offsetTop<space);var clickNearBottom=($click[0].offsetTop+$click.height()>$container.height()-space);var clickNearLeft=($click[0].offsetLeft<space);var clickNearRight=($click[0].offsetLeft+$click.width()>$container.width()-space);positionX=$click[0].offsetLeft-popupWidth/2+$click.width()/2;positionY=$click[0].offsetTop-popupHeight-space;tailX=positionX+popupWidth/2-$tail.width()/2;tailY=positionY+popupHeight-($tail.height()/2);tailRotation=225;if(popupHeight+space>$click[0].offsetTop){positionY=$click[0].offsetTop+$click.height()+space;tailY=positionY-$tail.height()/2;tailRotation=45;}if(positionX<0)positionX=0;if(positionX+popupWidth>$container.width())positionX=$container.width()-popupWidth;if(clickNearTop&&(clickNearLeft||clickNearRight)){positionX=$click[0].offsetLeft+(clickNearLeft?$click.width():-popupWidth);positionY=$click[0].offsetTop+$click.height();disableTail=true;}else if(clickNearBottom&&(clickNearLeft||clickNearRight)){positionX=$click[0].offsetLeft+(clickNearLeft?$click.width():-popupWidth);positionY=$click[0].offsetTop-popupHeight;disableTail=true;}else{if(!clickNearTop&&!clickNearBottom)if(clickNearLeft||clickNearRight){positionY=$click[0].offsetTop-popupHeight/2+$click.width()/2;positionX=$click[0].offsetLeft+(clickNearLeft?$click.width()+space:-popupWidth+-space);if(positionX<0){positionX=0;disableTail=true;}else{tailX=positionX+(clickNearLeft?-$tail.width()/2:popupWidth-$tail.width()/2);tailY=positionY+popupHeight/2-$tail.height()/2;tailRotation=(clickNearLeft?315:135);}}}if(positionY+popupHeight>$container.height()){positionY=$container.height()-popupHeight;if(popupHeight>$container.height()-($click[0].offsetTop+$click.height()+space))disableTail=true;}}else disableTail=true;if(positionY<0)positionY=0;$element.css({top:positionY,left:positionX});$tail.css({top:tailY,left:tailX});if(!disableTail)$tail.css({'left':tailX,'top':tailY,'transform':'rotate('+tailRotation+'deg)'}).show();else $tail.hide();};var setElementHeight=function($element){if(!$element.is(':visible')){$element.css('max-height','none');return;}var isFeedbackPopup=$element.hasClass('h5p-question-popup');var $tmp=$element.clone().css({'position':'absolute','max-height':'none','width':isFeedbackPopup?'':'100%'}).appendTo($element.parent());var sideMargins=parseFloat($element.css('margin-left'))+parseFloat($element.css('margin-right'));var tmpElWidth=$tmp.css('width')?$tmp.css('width'):'100%';$tmp.css('width','calc('+tmpElWidth+' - '+sideMargins+'px)');var h=Math.round($tmp.get(0).getBoundingClientRect().height);var fontSize=parseFloat($element.css('fontSize'));var relativeH=h/fontSize;$element.css('max-height',relativeH+'em');$tmp.remove();if(h>0&&sections.buttons&&sections.buttons.$element===$element){showSection(sections.buttons);setTimeout(resizeButtons,150);}return h;};var hideButtons=function(relocateFocus){for(var i=0;i<buttonsToHide.length;i++)hideButton(buttonsToHide[i].id);buttonsToHide=[];if(relocateFocus)self.focusButton();};var hideButton=function(buttonId){buttons[buttonId].$element.detach();buttons[buttonId].isVisible=false;};var toggleButtons=function(){if(sections.buttons===undefined)return;clearTimeout(toggleButtonsTransitionTimer);for(var i=0;i<buttonsToShow.length;i++){insert(buttonOrder,buttonsToShow[i].id,buttons,sections.buttons.$element);buttons[buttonsToShow[i].id].isVisible=true;}buttonsToShow=[];var numToHide=0;var relocateFocus=false;for(var j=0;j<buttonsToHide.length;j++){var button=buttons[buttonsToHide[j].id];if(button.isVisible)numToHide+=1;if(button.$element.is(':focus'))relocateFocus=true;}var animationTimer=150;if(sections.feedback&&sections.feedback.$element.hasClass('h5p-question-popup'))animationTimer=0;if(numToHide===sections.buttons.$element.children().length){hideSection(sections.buttons);hideButtons(relocateFocus);}else{hideButtons(relocateFocus);if(!sections.buttons.$element.is(':empty')){showSection(sections.buttons);setElementHeight(sections.buttons.$element);toggleButtonsTransitionTimer=setTimeout(function(){self.trigger('resize');},animationTimer);}resizeButtons();}toggleButtonsTimer=undefined;};var scaleImage=function(){var $imgSection=sections.image.$element;clearTimeout(imageTransitionTimer);$imgSection.addClass('animatable');if(imageThumb){$(this).attr('aria-expanded',true);$imgSection.addClass('h5p-question-image-fill-width');imageThumb=false;imageTransitionTimer=setTimeout(function(){self.trigger('resize');},600);}else{$(this).attr('aria-expanded',false);$imgSection.removeClass('h5p-question-image-fill-width');imageThumb=true;imageTransitionTimer=setTimeout(function(){self.trigger('resize');},600);}};var findScrollableAncestor=function($element,currDepth,maxDepth){if(!currDepth)currDepth=0;if(!maxDepth)maxDepth=5;if(!$element||!($element instanceof $)||document===$element.get(0)||currDepth>=maxDepth)return;if($element.css('overflow-y')==='auto')return $element;else return findScrollableAncestor($element.parent(),currDepth+1,maxDepth);};var scrollToBottom=function(){if(!$wrapper||($wrapper.hasClass('h5p-standalone')&&!H5P.isFullscreen))return;var scrollableAncestor=findScrollableAncestor($wrapper);if(scrollableAncestor)scrollableAncestor.animate({scrollTop:$wrapper.css('height')},"slow");};var resizeButtons=function(){if(!buttons||!sections.buttons)return;var go=function(){if(!sections.buttons.$element.is(':visible'))return;var buttonsWidth={max:0,min:0,current:0};for(var i in buttons){var button=buttons[i];if(button.isVisible){setButtonWidth(buttons[i]);buttonsWidth.max+=button.width.max;buttonsWidth.min+=button.width.min;buttonsWidth.current+=button.isTruncated?button.width.min:button.width.max;}}var makeButtonsFit=function(availableWidth){if(buttonsWidth.max<availableWidth){if(buttonsWidth.max!==buttonsWidth.current)restoreButtonLabels(buttonsWidth.current,availableWidth);return true;}else{if(buttonsWidth.min<availableWidth){if(buttonsWidth.current>availableWidth)removeButtonLabels(buttonsWidth.current,availableWidth);else restoreButtonLabels(buttonsWidth.current,availableWidth);return true;}}return false;};toggleFullWidthScorebar(false);var buttonSectionWidth=Math.floor(sections.buttons.$element.width())-1;if(!makeButtonsFit(buttonSectionWidth)){toggleFullWidthScorebar(true);buttonSectionWidth=Math.floor(sections.buttons.$element.width())-1;makeButtonsFit(buttonSectionWidth);}};if(sections.buttons.$element.is(':visible'))go();else{if(buttonTruncationTimer)clearTimeout(buttonTruncationTimer);buttonTruncationTimer=setTimeout(function(){buttonTruncationTimer=undefined;go();},0);}};var toggleFullWidthScorebar=function(enabled){if(sections.scorebar&&sections.scorebar.$element&&sections.scorebar.$element.hasClass('h5p-question-visible')){sections.buttons.$element.addClass('has-scorebar');sections.buttons.$element.toggleClass('wrap',enabled);sections.scorebar.$element.toggleClass('full-width',enabled);}else sections.buttons.$element.removeClass('has-scorebar');};var removeButtonLabels=function(buttonsWidth,maxButtonsWidth){for(var i=buttonOrder.length-1;i>=0;i--){var buttonId=buttonOrder[i];var button=buttons[buttonId];if(!button.isTruncated&&button.isVisible){var $button=button.$element;buttonsWidth-=button.width.max-button.width.min;let buttonText=$button.text();$button.attr('data-tooltip',buttonText);if(!button.ariaLabel)$button.attr('aria-label',buttonText);$button.html('').addClass('truncated');button.isTruncated=true;if(buttonsWidth<=maxButtonsWidth)return;}}};var restoreButtonLabels=function(buttonsWidth,maxButtonsWidth){for(var i=0;i<buttonOrder.length;i++){var buttonId=buttonOrder[i];var button=buttons[buttonId];if(button.isTruncated&&button.isVisible){buttonsWidth+=button.width.max-button.width.min+1;if(buttonsWidth>maxButtonsWidth)return;button.$element.html(button.text);button.$element.removeAttr('data-tooltip');if(!button.ariaLabel)button.$element.removeAttr('aria-label');button.$element.removeClass('truncated');button.isTruncated=false;}}};var existsInArray=function(keyValue,key,array){var i;for(i=0;i<array.length;i++)if(array[i][key]===keyValue)return i;return -1;};var showSection=function(section){section.$element.addClass('h5p-question-visible');section.isVisible=true;};var hideSection=function(section){section.$element.css('max-height','');section.isVisible=false;setTimeout(function(){if(!section.isVisible)section.$element.removeClass('h5p-question-visible');},150);};self.setBehaviour=function(options){$.extend(behaviour,options);};self.setVideo=function(params){sections.video={$element:$('<div/>',{'class':'h5p-question-video'})};if(disableAutoPlay&&params.params.playback)params.params.playback.autoplay=false;if(!params.params.visuals)params.params.visuals={};params.params.visuals.fit=false;sections.video.instance=H5P.newRunnable(params,self.contentId,sections.video.$element,true);var fromVideo=false;sections.video.instance.on('resize',function(){fromVideo=true;self.trigger('resize');fromVideo=false;});self.on('resize',function(){if(!fromVideo)sections.video.instance.trigger('resize');});return self;};self.setAudio=function(params){params.params=params.params||{};sections.audio={$element:$('<div/>',{'class':'h5p-question-audio'})};if(disableAutoPlay)params.params.autoplay=false;else{if(params.params.playerMode==='transparent')params.params.autoplay=true;}sections.audio.instance=H5P.newRunnable(params,self.contentId,sections.audio.$element,true);if(sections.audio.instance.audio)sections.audio.instance.audio.style.height='';return self;};self.pause=function(){if(sections.video&&sections.video.isVisible)sections.video.instance.pause();if(sections.audio&&sections.audio.isVisible)sections.audio.instance.pause();};self.play=function(){if(sections.video&&sections.video.isVisible)sections.video.instance.play();if(sections.audio&&sections.audio.isVisible)sections.audio.instance.play();};self.disableAutoPlay=function(){disableAutoPlay=true;};self.massageAttributeOutput=function(value){const dparser=new DOMParser().parseFromString(value,'text/html');const div=document.createElement('div');div.innerHTML=dparser.documentElement.textContent;;return div.textContent||div.innerText||'';};self.setImage=function(path,options){options=options?options:{};sections.image={};sections.image.$element=$('<div/>',{'class':'h5p-question-image h5p-question-image-fill-width'});var $imgWrap=$('<div/>',{'class':'h5p-question-image-wrap',appendTo:sections.image.$element});var $img=$('<img/>',{src:H5P.getPath(path,self.contentId),alt:(options.alt===undefined?'':self.massageAttributeOutput(options.alt)),title:(options.title===undefined?'':self.massageAttributeOutput(options.title)),on:{load:function(){self.trigger('imageLoaded',this);self.trigger('resize');}},appendTo:$imgWrap});if(options.disableImageZooming){$img.css('maxHeight','none');var determineImgWidth=function(){var imageSectionWidth=sections.image.$element.get(0).getBoundingClientRect().width;$imgWrap.css({'-webkit-transition':'none','transition':'none'});var diffX=2*($imgWrap.get(0).getBoundingClientRect().left-sections.image.$element.get(0).getBoundingClientRect().left);if($img.get(0).naturalWidth>=imageSectionWidth-diffX)sections.image.$element.addClass('h5p-question-image-fill-width');else sections.image.$element.removeClass('h5p-question-image-fill-width');$imgWrap.css({'-webkit-transition':'','transition':''});};if($img.is(':visible'))determineImgWidth();else $img.on('load',determineImgWidth);return;}const setAriaLabel=()=>{const ariaLabel=$imgWrap.attr('aria-expanded')==='true'?options.minimizeImage:options.expandImage;$imgWrap.attr('aria-label',`${ariaLabel} ${options.alt}`);};var sizeDetermined=false;var determineSize=function(){if(sizeDetermined||!$img.is(':visible'))return;$imgWrap.addClass('h5p-question-image-scalable').attr('aria-expanded',false).attr('role','button').attr('tabIndex','0').on('click',function(event){if(event.which===1){scaleImage.apply(this);setAriaLabel();}}).on('keypress',function(event){if(event.which===32){event.preventDefault();scaleImage.apply(this);setAriaLabel();}});setAriaLabel();sections.image.$element.removeClass('h5p-question-image-fill-width');sizeDetermined=true;};self.on('resize',determineSize);return self;};self.setIntroduction=function(content){register('introduction',content);return self;};self.setContent=function(content,options){register('content',content);if(options&&options.class)sections.content.$element.addClass(options.class);return self;};self.read=function(content){if(!$read)return;if(readText)readText+=(readText.substr(-1,1)==='.'?' ':'. ')+content;else readText=content;$read.html(readText);setTimeout(function(){readText=null;$read.html('');},100);};self.readFeedback=function(){var invalidFeedback=behaviour.disableReadSpeaker||!showFeedback||!sections.feedback||!sections.feedback.$element;if(invalidFeedback)return;var $feedbackText=$('.h5p-question-feedback-content-text',sections.feedback.$element);if($feedbackText&&$feedbackText.html()&&$feedbackText.html().length)self.read($feedbackText.html());};self.removeFeedback=function(){clearTimeout(feedbackTransitionTimer);if(sections.feedback&&showFeedback){showFeedback=false;hideSection(sections.scorebar);hideSection(sections.feedback);sectionsIsTransitioning=true;feedbackTransitionTimer=setTimeout(function(){if(!showFeedback){sections.feedback.$element.children().detach();sections.scorebar.$element.children().detach();self.trigger('resize');}sectionsIsTransitioning=false;scoreBar.setScore(0);},150);if($wrapper)$wrapper.find('.h5p-question-feedback-tail').remove();}return self;};self.setFeedback=function(content,score,maxScore,scoreBarLabel,helpText,popupSettings,scoreExplanationButtonLabel){if(behaviour.disableFeedback)return self;toggleButtons();clickElement=(popupSettings!=null&&popupSettings.click!=null?popupSettings.click:null);clearTimeout(feedbackTransitionTimer);var $feedback=$('<div>',{'class':'h5p-question-feedback-container'});var $feedbackContent=$('<div>',{'class':'h5p-question-feedback-content'}).appendTo($feedback);$('<div>',{'class':'h5p-question-feedback-content-text','html':content}).appendTo($feedbackContent);var $scorebar=$('<div>',{'class':'h5p-question-scorebar-container'});if(scoreBar===undefined)scoreBar=JoubelUI.createScoreBar(maxScore,scoreBarLabel,helpText,scoreExplanationButtonLabel);scoreBar.appendTo($scorebar);$feedbackContent.toggleClass('has-content',content!==undefined&&content.length>0);if(!behaviour.disableReadSpeaker&&scoreBarLabel)self.read(scoreBarLabel.replace(':num',score).replace(':total',maxScore)+'. '+(content?content:''));showFeedback=true;if(sections.feedback){update('feedback',$feedback);update('scorebar',$scorebar);}else{register('feedback',$feedback);register('scorebar',$scorebar);if(initialized&&$wrapper){insert(self.order,'feedback',sections,$wrapper);insert(self.order,'scorebar',sections,$wrapper);}}showSection(sections.feedback);showSection(sections.scorebar);resizeButtons();if(popupSettings!=null&&popupSettings.showAsPopup==true){makeFeedbackPopup(popupSettings.closeText);scoreBar.setScore(score);}else feedbackTransitionTimer=setTimeout(function(){setElementHeight(sections.feedback.$element);setElementHeight(sections.scorebar.$element);sectionsIsTransitioning=true;scrollToBottom();feedbackTransitionTimer=setTimeout(function(){sectionsIsTransitioning=false;self.trigger('resize');scoreBar.setScore(score);},150);},0);return self;};self.updateFeedbackContent=function(content,extendContent){if(sections.feedback&&sections.feedback.$element){if(extendContent)content=$('.h5p-question-feedback-content',sections.feedback.$element).html()+' '+content;$('.h5p-question-feedback-content',sections.feedback.$element).html(content).addClass('has-content');setElementHeight(sections.feedback.$element);setTimeout(self.trigger.bind(self,'resize'),150);}return self;};self.setExplanation=function(data,title){if(data){var explainer=new H5P.Question.Explainer(title,data);if(sections.explanation)update('explanation',explainer.getElement());else{register('explanation',explainer.getElement());if(initialized&&$wrapper)insert(self.order,'explanation',sections,$wrapper);}}else{if(sections.explanation)sections.explanation.$element.children().detach();}return self;};self.hasButton=function(id){return (buttons[id]!==undefined);};self.addButton=function(id,text,clicked,visible,options,extras){if(buttons[id])return self;if(sections.buttons===undefined){register('buttons');if(initialized)insert(self.order,'buttons',sections,$wrapper);}extras=extras||{};extras.confirmationDialog=extras.confirmationDialog||{};options=options||{};var confirmationDialog=self.addConfirmationDialogToButton(extras.confirmationDialog,clicked);var handleButtonClick=function(){if(extras.confirmationDialog.enable&&confirmationDialog){if(!extras.confirmationDialog.$parentElement)sections.popups.$element.removeClass('hidden');confirmationDialog.show($e.position().top);}else clicked();};const isSubmitting=extras.contentData&&extras.contentData.standalone&&(extras.contentData.isScoringEnabled||extras.contentData.isReportingEnabled);if(isSubmitting&&extras.textIfSubmitting)text=extras.textIfSubmitting;buttons[id]={isTruncated:false,text,isVisible:false,ariaLabel:options['aria-label']};var isAnchorTag=(options.href!==undefined);var $e=buttons[id].$element=JoubelUI.createButton($.extend({'class':'h5p-question-'+id,html:text,on:{click:function(event){handleButtonClick();if(isAnchorTag)event.preventDefault();}}},options));buttonOrder.push(id);H5P.Tooltip($e.get(0),{tooltipSource:'data-tooltip'});if(isAnchorTag)$e.on('keypress',function(event){if(event.which===32){handleButtonClick();event.preventDefault();}});if(visible===undefined||visible){$e.appendTo(sections.buttons.$element);buttons[id].isVisible=true;showSection(sections.buttons);}return self;};var setButtonWidth=function(button){var $button=button.$element;var $tmp=$button.clone().css({'position':'absolute','white-space':'nowrap','max-width':'none'}).removeClass('truncated').html(button.text).appendTo($button.parent());button.width={max:Math.ceil($tmp.outerWidth()+parseFloat($tmp.css('margin-left'))+parseFloat($tmp.css('margin-right')))};$tmp.html('').addClass('truncated');button.width.min=Math.ceil($tmp.outerWidth()+parseFloat($tmp.css('margin-left'))+parseFloat($tmp.css('margin-right')));$tmp.remove();};self.addConfirmationDialogToButton=function(options,clicked){options=options||{};if(!options.enable)return;var confirmationDialog=new H5P.ConfirmationDialog({instance:options.instance,headerText:options.l10n.header,dialogText:options.l10n.body,cancelText:options.l10n.cancelLabel,confirmText:options.l10n.confirmLabel});if(options.$parentElement){const parentElement=options.$parentElement.get(0);let dialogParent;if(parentElement.classList.contains('h5p-content'))dialogParent=parentElement.querySelector('.h5p-container');confirmationDialog.appendTo(dialogParent??parentElement);}else{if(sections.popups===undefined){register('popups');if(initialized)insert(self.order,'popups',sections,$wrapper);sections.popups.$element.addClass('hidden');self.order.push('popups');}confirmationDialog.appendTo(sections.popups.$element.get(0));}confirmationDialog.on('confirmed',function(){if(!options.$parentElement)sections.popups.$element.addClass('hidden');clicked();self.trigger('confirmed');});confirmationDialog.on('canceled',function(){if(!options.$parentElement)sections.popups.$element.addClass('hidden');self.trigger('canceled');});return confirmationDialog;};self.showButton=function(id,priority){var aboutToBeHidden=existsInArray(id,'id',buttonsToHide)!==-1;if(buttons[id]===undefined||(buttons[id].isVisible===true&&!aboutToBeHidden))return self;priority=priority||0;var indexToShow=existsInArray(id,'id',buttonsToShow);if(indexToShow!==-1){if(buttonsToShow[indexToShow].priority<priority)buttonsToShow[indexToShow].priority=priority;return self;}var exists=existsInArray(id,'id',buttonsToHide);if(exists!==-1){if(buttonsToHide[exists].priority<=priority){buttonsToHide.splice(exists,1);buttonsToShow.push({id,priority});}}else{if(!buttons[id].$element.is(':visible'))buttonsToShow.push({id,priority});}if(!toggleButtonsTimer)toggleButtonsTimer=setTimeout(toggleButtons,0);return self;};self.hideButton=function(id,priority){var aboutToBeShown=existsInArray(id,'id',buttonsToShow)!==-1;if(buttons[id]===undefined||(buttons[id].isVisible===false&&!aboutToBeShown))return self;priority=priority||0;var indexToHide=existsInArray(id,'id',buttonsToHide);if(indexToHide!==-1){if(buttonsToHide[indexToHide].priority<priority)buttonsToHide[indexToHide].priority=priority;return self;}var exists=existsInArray(id,'id',buttonsToShow);if(exists!==-1){if(buttonsToShow[exists].priority<=priority){buttonsToShow.splice(exists,1);buttonsToHide.push({id,priority});}}else if(!buttons[id].$element.is(':visible'))hideButton(id);else buttonsToHide.push({id,priority});if(!toggleButtonsTimer)toggleButtonsTimer=setTimeout(toggleButtons,0);return self;};self.focusButton=function(id){if(id===undefined)for(var i=0;i<buttonOrder.length;i++){var button=buttons[buttonOrder[i]];if(button&&button.isVisible){button.$element.focus();break;}}else{if(buttons[id]&&buttons[id].$element.is(':visible'))buttons[id].$element.focus();}return self;};self.toggleReadSpeaker=function(disable){behaviour.disableReadSpeaker=disable||!behaviour.disableReadSpeaker;};self.insertSectionAtElement=function(id,$element){if(sections[id]===undefined)register(id);sections[id].parent=$element;if(!initialized)insert([id],id,sections,$element);return self;};self.attach=function($container){if(self.isRoot())self.setActivityStarted();if($wrapper===undefined){if(self.registerDomElements!==undefined&&(self.registerDomElements instanceof Function||typeof self.registerDomElements==='function'))self.registerDomElements();$read=$('<div/>',{'aria-live':'polite','class':'h5p-hidden-read'});register('read',$read);self.trigger('registerDomElements');}$wrapper=$container;$container.html('').addClass('h5p-question h5p-'+type);var $sections=[];for(var i=0;i<self.order.length;i++){var section=self.order[i];if(sections[section]){if(sections[section].parent)sections[section].$element.appendTo(sections[section].parent);else $sections.push(sections[section].$element);sections[section].isVisible=true;}}$container.append($sections);self.trigger('domChanged',{'$target':$container,'library':self.libraryInfo.machineName,'contentId':self.contentId,'key':'newLibrary'},{'bubbles':true,'external':true});initialized=true;return self;};self.detachSections=function(){initialized=false;for(var section in sections)sections[section].$element.detach();return self;};self.on('resize',function(){if(!sectionsIsTransitioning&&sections.feedback&&showFeedback)setElementHeight(sections.feedback.$element);var $element=sections.feedback;var $click=clickElement;if($element!=null&&$element.$element!=null&&$click!=null&&$click.$element!=null)setTimeout(function(){positionFeedbackPopup($element.$element,$click.$element);},10);resizeButtons();});}Question.prototype=Object.create(EventDispatcher.prototype);Question.prototype.constructor=Question;Question.determineOverallFeedback=function(feedbacks,scoreRatio){scoreRatio=Math.floor(scoreRatio*100);for(var i=0;i<feedbacks.length;i++){var feedback=feedbacks[i];var hasFeedback=(feedback.feedback!==undefined&&feedback.feedback.trim().length!==0);if(feedback.from<=scoreRatio&&feedback.to>=scoreRatio&&hasFeedback)return feedback.feedback;}return '';};return Question;})(H5P.jQuery,H5P.EventDispatcher,H5P.JoubelUI);;
H5P.Question.Explainer=(function($){function Explainer(title,explanations){var self=this;var createHTML=function(){self.$explanation=$('<div>',{'class':'h5p-question-explanation-container'});$('<div>',{'class':'h5p-question-explanation-title',role:'heading',html:title,appendTo:self.$explanation});var $explanationList=$('<ul>',{'class':'h5p-question-explanation-list',appendTo:self.$explanation});for(var i=0;i<explanations.length;i++){var feedback=explanations[i];var $explanationItem=$('<li>',{'class':'h5p-question-explanation-item',appendTo:$explanationList});var $content=$('<div>',{'class':'h5p-question-explanation-status'});if(feedback.correct)$('<span>',{'class':'h5p-question-explanation-correct',html:feedback.correct,appendTo:$content});if(feedback.wrong)$('<span>',{'class':'h5p-question-explanation-wrong',html:feedback.wrong,appendTo:$content});$content.appendTo($explanationItem);if(feedback.text)$('<div>',{'class':'h5p-question-explanation-text',html:feedback.text,appendTo:$explanationItem});}};createHTML();self.getElement=function(){return self.$explanation;};}return Explainer;})(H5P.jQuery);;
(function(Question){Question.ScorePoints=function(){var self=this;var elements=[];var showElementsTimer;self.getElement=function(isCorrect){var element=document.createElement('div');element.classList.add(isCorrect?'h5p-question-plus-one':'h5p-question-minus-one');element.classList.add('h5p-question-hidden-one');elements.push(element);if(showElementsTimer)clearTimeout(showElementsTimer);showElementsTimer=setTimeout(showElements,0);return element;};var showElements=function(){var delay=0;var increment=150;var maxTime=1000;if(elements.length&&elements.length>Math.ceil(maxTime/increment))increment=maxTime/elements.length;for(var i=0;i<elements.length;i++){setTimeout(showElement(elements[i]),delay);delay+=increment;}};var showElement=function(element){return function(){element.classList.remove('h5p-question-hidden-one');};};};})(H5P.Question);;
var H5P=H5P||{};H5P.MultiChoice=function(options,contentId,contentData){if(!(this instanceof H5P.MultiChoice))return new H5P.MultiChoice(options,contentId,contentData);var self=this;this.contentId=contentId;this.contentData=contentData;H5P.Question.call(self,'multichoice');var $=H5P.jQuery;var defaults={image:null,question:"No question text provided",answers:[{tipsAndFeedback:{tip:'',chosenFeedback:'',notChosenFeedback:''},text:"Answer 1",correct:true}],overallFeedback:[],weight:1,userAnswers:[],UI:{checkAnswerButton:'Check',submitAnswerButton:'Submit',showSolutionButton:'Show solution',tryAgainButton:'Try again',scoreBarLabel:'You got :num out of :total points',tipAvailable:"Tip available",feedbackAvailable:"Feedback available",readFeedback:'Read feedback',shouldCheck:"Should have been checked",shouldNotCheck:"Should not have been checked",noInput:'Input is required before viewing the solution',a11yCheck:'Check the answers. The responses will be marked as correct, incorrect, or unanswered.',a11yShowSolution:'Show the solution. The task will be marked with its correct solution.',a11yRetry:'Retry the task. Reset all responses and start the task over again.'},behaviour:{enableRetry:true,enableSolutionsButton:true,enableCheckButton:true,type:'auto',singlePoint:true,randomAnswers:false,showSolutionsRequiresInput:true,autoCheck:false,passPercentage:100,showScorePoints:true}};var params=$.extend(true,defaults,options);var numCorrect=0;for(var i=0;i<params.answers.length;i++){var answer=params.answers[i];answer.tipsAndFeedback=answer.tipsAndFeedback||{};if(params.answers[i].correct)numCorrect++;}var blankIsCorrect=(numCorrect===0);if(params.behaviour.type==='auto')params.behaviour.singleAnswer=(numCorrect===1);else params.behaviour.singleAnswer=(params.behaviour.type==='single');var getCheckboxOrRadioIcon=function(radio,selected){var icon;if(radio)icon=selected?'&#xe603;':'&#xe600;';else icon=selected?'&#xe601;':'&#xe602;';return icon;};var $myDom;var $feedbackDialog;var removeFeedbackDialog=function(){$myDom.unbind('click',removeFeedbackDialog);$myDom.find('.h5p-feedback-button, .h5p-feedback-dialog').remove();$myDom.find('.h5p-has-feedback').removeClass('h5p-has-feedback');if($feedbackDialog)$feedbackDialog.remove();};var score=0;var solutionsVisible=false;var addFeedback=function($element,feedback){$feedbackDialog=$(''+'<div class="h5p-feedback-dialog">'+'<div class="h5p-feedback-inner">'+'<div class="h5p-feedback-text">'+feedback+'</div>'+'</div>'+'</div>');if(!$element.find($('.h5p-feedback-dialog')).length)$feedbackDialog.appendTo($element.addClass('h5p-has-feedback'));};self.registerDomElements=function(){var media=params.media;if(media&&media.type&&media.type.library){media=media.type;var type=media.library.split(' ')[0];if(type==='H5P.Image'){if(media.params.file)self.setImage(media.params.file.path,{disableImageZooming:params.media.disableImageZooming||false,alt:media.params.alt,title:media.params.title,expandImage:media.params.expandImage,minimizeImage:media.params.minimizeImage});}else if(type==='H5P.Video'){if(media.params.sources)self.setVideo(media);}else{if(type==='H5P.Audio')if(media.params.files)self.setAudio(media);}}for(var i=0;i<params.answers.length;i++)params.answers[i].checkboxOrRadioIcon=getCheckboxOrRadioIcon(params.behaviour.singleAnswer,params.userAnswers.indexOf(i)>-1);self.setIntroduction('<div id="'+params.labelId+'">'+params.question+'</div>');$myDom=$('<ul>',{'class':'h5p-answers',role:params.role,'aria-labelledby':params.labelId});for(let i=0;i<params.answers.length;i++){const answer=params.answers[i];answer.text=answer.text??'<div></div>';$('<li>',{'class':'h5p-answer',role:answer.role,tabindex:answer.tabindex,'aria-checked':answer.checked,'data-id':i,html:'<div class="h5p-alternative-container"><span class="h5p-alternative-inner">'+answer.text+'</span></div>',appendTo:$myDom});}self.setContent($myDom,{'class':params.behaviour.singleAnswer?'h5p-radio':'h5p-check'});var $answers=$('.h5p-answer',$myDom).each(function(i){var tip=params.answers[i].tipsAndFeedback.tip;if(tip===undefined)return;tip=tip.trim();var tipContent=tip.replace(/&nbsp;/g,'').replace(/<p>/g,'').replace(/<\/p>/g,'').trim();if(!tipContent.length)return;else $(this).addClass('h5p-has-tip');var $wrap=$('<div/>',{'class':'h5p-multichoice-tipwrap','aria-label':params.UI.tipAvailable+'.'});var $multichoiceTip=$('<div>',{'role':'button','tabindex':0,'title':params.UI.tipsLabel,'aria-label':params.UI.tipsLabel,'aria-expanded':false,'class':'multichoice-tip',appendTo:$wrap});var tipIconHtml='<span class="joubel-icon-tip-normal">'+'<span class="h5p-icon-shadow"></span>'+'<span class="h5p-icon-speech-bubble"></span>'+'<span class="h5p-icon-info"></span>'+'</span>';$multichoiceTip.append(tipIconHtml);$multichoiceTip.click(function(){var $tipContainer=$multichoiceTip.parents('.h5p-answer');var openFeedback=!$tipContainer.children('.h5p-feedback-dialog').is($feedbackDialog);removeFeedbackDialog();if(openFeedback){$multichoiceTip.attr('aria-expanded',true);addFeedback($tipContainer,tip);$feedbackDialog.addClass('h5p-has-tip');self.read(tip);}else $multichoiceTip.attr('aria-expanded',false);self.trigger('resize');setTimeout(function(){$myDom.click(removeFeedbackDialog);},100);return false;}).keydown(function(e){if(e.which===32){$(this).click();return false;}});$('.h5p-alternative-container',this).append($wrap);});var toggleCheck=function($ans){if($ans.attr('aria-disabled')==='true')return;self.answered=true;var num=parseInt($ans.data('id'));if(params.behaviour.singleAnswer){params.userAnswers=[num];score=(params.answers[num].correct?1:0);$answers.not($ans).removeClass('h5p-selected').attr('tabindex','-1').attr('aria-checked','false');$ans.addClass('h5p-selected').attr('tabindex','0').attr('aria-checked','true');}else{if($ans.attr('aria-checked')==='true'){const pos=params.userAnswers.indexOf(num);if(pos!==-1)params.userAnswers.splice(pos,1);if(params.behaviour.autoCheck&&!params.behaviour.enableRetry)return;$ans.removeClass('h5p-selected').attr('aria-checked','false');}else{params.userAnswers.push(num);$ans.addClass('h5p-selected').attr('aria-checked','true');}calcScore();}self.triggerXAPI('interacted');hideSolution($ans);if(params.userAnswers.length){self.showButton('check-answer');self.hideButton('try-again');self.hideButton('show-solution');if(params.behaviour.autoCheck)if(params.behaviour.singleAnswer)checkAnswer();else{self.showCheckSolution(true);if(score===self.getMaxScore())checkAnswer();}}};$answers.click(function(){toggleCheck($(this));}).keydown(function(e){if(e.keyCode===32){toggleCheck($(this));return false;}if(params.behaviour.singleAnswer)switch(e.keyCode){case 38:case 37:var $prev=$(this).prev();if($prev.length)toggleCheck($prev.focus());return false;case 40:case 39:var $next=$(this).next();if($next.length)toggleCheck($next.focus());return false;}});if(params.behaviour.singleAnswer)$answers.focus(function(){if($(this).attr('aria-disabled')!=='true')$answers.not(this).attr('tabindex','-1');}).blur(function(){if(!$answers.filter('.h5p-selected').length)$answers.first().add($answers.last()).attr('tabindex','0');});addButtons();if(!params.behaviour.singleAnswer)calcScore();else if(params.userAnswers.length&&params.answers[params.userAnswers[0]].correct)score=1;else score=0;if(hasCheckedAnswer&&params.behaviour.autoCheck)if(params.behaviour.singleAnswer||score===self.getMaxScore())checkAnswer();else self.showCheckSolution(true);};this.showAllSolutions=function(){if(solutionsVisible)return;solutionsVisible=true;$myDom.find('.h5p-answer').each(function(i,e){var $e=$(e);var a=params.answers[i];const className='h5p-solution-icon-'+(params.behaviour.singleAnswer?'radio':'checkbox');if(a.correct)$e.addClass('h5p-should').append($('<span/>',{'class':className,html:params.UI.shouldCheck+'.'}));else $e.addClass('h5p-should-not').append($('<span/>',{'class':className,html:params.UI.shouldNotCheck+'.'}));}).find('.h5p-question-plus-one, .h5p-question-minus-one').remove();disableInput();$myDom.find('.h5p-answer:first-child').focus();self.hideButton('check-answer');self.hideButton('show-solution');if(params.behaviour.enableRetry)self.showButton('try-again');self.trigger('resize');};this.showSolutions=function(){removeFeedbackDialog();self.showCheckSolution();self.showAllSolutions();disableInput();self.hideButton('try-again');};var hideSolution=function($answer){$answer.removeClass('h5p-correct').removeClass('h5p-wrong').removeClass('h5p-should').removeClass('h5p-should-not').removeClass('h5p-has-feedback').find('.h5p-question-plus-one, '+'.h5p-question-minus-one, '+'.h5p-answer-icon, '+'.h5p-solution-icon-radio, '+'.h5p-solution-icon-checkbox, '+'.h5p-feedback-dialog').remove();};this.hideSolutions=function(){solutionsVisible=false;hideSolution($('.h5p-answer',$myDom));this.removeFeedback();self.trigger('resize');};this.resetTask=function(moveFocus=false){for(let i=0;i<params.answers.length;i++)if(params.answers[i].checked)delete params.answers[i].checked;self.answered=false;self.hideSolutions();params.userAnswers=[];removeSelections(moveFocus);self.showButton('check-answer');self.hideButton('try-again');self.hideButton('show-solution');enableInput();$myDom?.find('.h5p-feedback-available').remove();};var calculateMaxScore=function(){if(blankIsCorrect)return params.weight;var maxScore=0;for(var i=0;i<params.answers.length;i++){var choice=params.answers[i];if(choice.correct)maxScore+=(choice.weight!==undefined?choice.weight:1);}return maxScore;};this.getMaxScore=function(){return (!params.behaviour.singleAnswer&&!params.behaviour.singlePoint?calculateMaxScore():params.weight);};var checkAnswer=function(){$myDom.unbind('click',removeFeedbackDialog);removeFeedbackDialog();if(params.behaviour.enableSolutionsButton)self.showButton('show-solution');if(params.behaviour.enableRetry)self.showButton('try-again');self.hideButton('check-answer');self.showCheckSolution();disableInput();var xAPIEvent=self.createXAPIEventTemplate('answered');addQuestionToXAPI(xAPIEvent);addResponseToXAPI(xAPIEvent);self.trigger(xAPIEvent);};var addButtons=function(){var $content=$('[data-content-id="'+self.contentId+'"].h5p-content');var $containerParents=$content.parents('.h5p-container');var $container;if($containerParents.length!==0)$container=$containerParents.last();else if($content.length!==0)$container=$content;else $container=$(document.body);self.addButton('show-solution',params.UI.showSolutionButton,function(){if(params.behaviour.showSolutionsRequiresInput&&!self.getAnswerGiven(true)){self.updateFeedbackContent(params.UI.noInput);self.read(params.UI.noInput);}else{calcScore();self.showAllSolutions();}},false,{'aria-label':params.UI.a11yShowSolution});if(params.behaviour.enableCheckButton&&(!params.behaviour.autoCheck||!params.behaviour.singleAnswer))self.addButton('check-answer',params.UI.checkAnswerButton,function(){self.answered=true;checkAnswer();$myDom.find('.h5p-answer:first-child').focus();},true,{'aria-label':params.UI.a11yCheck},{confirmationDialog:{enable:params.behaviour.confirmCheckDialog,l10n:params.confirmCheck,instance:self,$parentElement:$container},contentData:self.contentData,textIfSubmitting:params.UI.submitAnswerButton});self.addButton('try-again',params.UI.tryAgainButton,function(){self.resetTask(true);if(params.behaviour.randomAnswers){var oldIdMap=idMap;idMap=getShuffleMap();var answersDisplayed=$myDom.find('.h5p-answer');var tip=[];for(i=0;i<answersDisplayed.length;i++)tip[i]=$(answersDisplayed[i]).find('.h5p-multichoice-tipwrap');for(i=0;i<answersDisplayed.length;i++){$(answersDisplayed[i]).find('.h5p-alternative-inner').html(params.answers[i].text);$(tip[i]).detach().appendTo($(answersDisplayed[idMap.indexOf(oldIdMap[i])]).find('.h5p-alternative-container'));}}},false,{'aria-label':params.UI.a11yRetry},{confirmationDialog:{enable:params.behaviour.confirmRetryDialog,l10n:params.confirmRetry,instance:self,$parentElement:$container}});};var getFeedbackText=function(score,max){var ratio=(score/max);var feedback=H5P.Question.determineOverallFeedback(params.overallFeedback,ratio);return feedback.replace('@score',score).replace('@total',max);};this.showCheckSolution=function(skipFeedback){var scorePoints;if(!(params.behaviour.singleAnswer||params.behaviour.singlePoint||!params.behaviour.showScorePoints))scorePoints=new H5P.Question.ScorePoints();$myDom.find('.h5p-answer').each(function(i,e){var $e=$(e);var a=params.answers[i];var chosen=($e.attr('aria-checked')==='true');if(chosen){if(a.correct){if(!$e.hasClass('h5p-correct'))$e.addClass('h5p-correct').append($('<span/>',{'class':'h5p-answer-icon',html:params.UI.correctAnswer+'.'}));}else{if(!$e.hasClass('h5p-wrong'))$e.addClass('h5p-wrong').append($('<span/>',{'class':'h5p-answer-icon',html:params.UI.wrongAnswer+'.'}));}if(scorePoints){var alternativeContainer=$e[0].querySelector('.h5p-alternative-container');if(!params.behaviour.autoCheck||alternativeContainer.querySelector('.h5p-question-plus-one, .h5p-question-minus-one')===null)alternativeContainer.appendChild(scorePoints.getElement(a.correct));}}if(!skipFeedback)if(chosen&&a.tipsAndFeedback.chosenFeedback!==undefined&&a.tipsAndFeedback.chosenFeedback!=='')addFeedback($e,a.tipsAndFeedback.chosenFeedback);else{if(!chosen&&a.tipsAndFeedback.notChosenFeedback!==undefined&&a.tipsAndFeedback.notChosenFeedback!=='')addFeedback($e,a.tipsAndFeedback.notChosenFeedback);}});var max=self.getMaxScore();var fullScore=(score===max);if(fullScore){self.hideButton('check-answer');self.hideButton('try-again');self.hideButton('show-solution');}if(!skipFeedback)this.setFeedback(getFeedbackText(score,max),score,max,params.UI.scoreBarLabel);self.trigger('resize');};var disableInput=function(){$('.h5p-answer',$myDom).attr({'aria-disabled':'true','tabindex':'-1'}).removeAttr('role').removeAttr('aria-checked');$('.h5p-answers').removeAttr('role');};var enableInput=function(){$('.h5p-answer',$myDom).attr({'aria-disabled':'false','role':params.behaviour.singleAnswer?'radio':'checkbox'});$('.h5p-answers').attr('role',params.role);};var calcScore=function(){score=0;for(const answer of params.userAnswers){const choice=params.answers[answer];const weight=(choice.weight!==undefined?choice.weight:1);if(choice.correct)score+=weight;else score-=weight;}if(score<0)score=0;if(!params.userAnswers.length&&blankIsCorrect)score=params.weight;if(params.behaviour.singlePoint)score=(100*score/calculateMaxScore())>=params.behaviour.passPercentage?params.weight:0;};var removeSelections=function(moveFocus){var $answers=$('.h5p-answer',$myDom).removeClass('h5p-selected').attr('aria-checked','false');if(!params.behaviour.singleAnswer)$answers.attr('tabindex','0');else $answers.first().attr('tabindex','0');if(moveFocus||self.isRoot())$answers.first().focus();calcScore();};this.getXAPIData=function(){var xAPIEvent=this.createXAPIEventTemplate('answered');addQuestionToXAPI(xAPIEvent);addResponseToXAPI(xAPIEvent);return {statement:xAPIEvent.data.statement};};var addQuestionToXAPI=function(xAPIEvent){var definition=xAPIEvent.getVerifiedStatementValue(['object','definition']);definition.description={'en-US':$('<div>'+params.question+'</div>').text()};definition.type='http://adlnet.gov/expapi/activities/cmi.interaction';definition.interactionType='choice';definition.correctResponsesPattern=[];definition.choices=[];for(var i=0;i<params.answers.length;i++){definition.choices[i]={'id':params.answers[i].originalOrder+'','description':{'en-US':$('<div>'+params.answers[i].text+'</div>').text()}};if(params.answers[i].correct)if(!params.singleAnswer){if(definition.correctResponsesPattern.length)definition.correctResponsesPattern[0]+='[,]';else definition.correctResponsesPattern.push('');definition.correctResponsesPattern[0]+=params.answers[i].originalOrder;}else definition.correctResponsesPattern.push(''+params.answers[i].originalOrder);}};var addResponseToXAPI=function(xAPIEvent){var maxScore=self.getMaxScore();var success=(100*score/maxScore)>=params.behaviour.passPercentage;xAPIEvent.setScoredResult(score,maxScore,self,true,success);if(params.userAnswers===undefined)calcScore();var response='';for(var i=0;i<params.userAnswers.length;i++){if(response!=='')response+='[,]';response+=idMap===undefined?params.userAnswers[i]:idMap[params.userAnswers[i]];}xAPIEvent.data.statement.result.response=response;};var getShuffleMap=function(){params.answers=H5P.shuffleArray(params.answers);var idMap=[];for(i=0;i<params.answers.length;i++)idMap[i]=params.answers[i].originalOrder;return idMap;};var idMap;for(i=0;i<params.answers.length;i++)params.answers[i].originalOrder=i;if(params.behaviour.randomAnswers)idMap=getShuffleMap();params.userAnswers=[];if(contentData&&contentData.previousState!==undefined)if(contentData.previousState.answers){if(!idMap)params.userAnswers=contentData.previousState.answers;else{for(i=0;i<contentData.previousState.answers.length;i++)for(var k=0;k<idMap.length;k++)if(idMap[k]===contentData.previousState.answers[i])params.userAnswers.push(k);}calcScore();}var hasCheckedAnswer=false;for(var j=0;j<params.answers.length;j++){var ans=params.answers[j];if(!params.behaviour.singleAnswer){ans.role='checkbox';ans.tabindex='0';if(params.userAnswers.indexOf(j)!==-1){ans.checked='true';hasCheckedAnswer=true;}}else{ans.role='radio';if(params.userAnswers.length===0){if(i===0||i===params.answers.length)ans.tabindex='0';}else{if(params.userAnswers.indexOf(j)!==-1){ans.tabindex='0';ans.checked='true';hasCheckedAnswer=true;}}}if(ans.tabindex===undefined)ans.tabindex='-1';if(ans.checked===undefined)ans.checked='false';}H5P.MultiChoice.counter=(H5P.MultiChoice.counter===undefined?0:H5P.MultiChoice.counter+1);params.role=(params.behaviour.singleAnswer?'radiogroup':'group');params.labelId='h5p-mcq'+H5P.MultiChoice.counter;this.getCurrentState=function(){var state={};if(!idMap)state.answers=params.userAnswers;else{state.answers=[];for(var i=0;i<params.userAnswers.length;i++)state.answers.push(idMap[params.userAnswers[i]]);}return state;};this.getAnswerGiven=function(ignoreCheck){var answered=ignoreCheck?false:this.answered;return answered||params.userAnswers.length>0||blankIsCorrect;};this.getScore=function(){return score;};this.getTitle=function(){return H5P.createTitle((this.contentData&&this.contentData.metadata&&this.contentData.metadata.title)?this.contentData.metadata.title:'Multiple Choice');};};H5P.MultiChoice.prototype=Object.create(H5P.Question.prototype);H5P.MultiChoice.prototype.constructor=H5P.MultiChoice;;
(()=>{var t={453:()=>{MathJax={options:{enableMenu:!1,ignoreHtmlClass:"ckeditor",processHtmlClass:"tex2jax_process",renderActions:{enrich:{"[+]":[function(t){t.enrich(!0);},function(t,e){t.enrich(e,!0);}]}},menuOptions:{settings:{collapsible:!1,inTabOrder:!0,explorer:!1}}},loader:{load:["a11y/semantic-enrich"]},tex:{packages:{"[+]":["fix-unicode"]}},startup:{pageReady:()=>MathJax.startup.defaultPageReady().then((()=>{try{H5P.instances[0].trigger("resize");}catch(t){}})),ready(){const {CHTMLFontData:t}=MathJax._.output.chtml.FontData,e=t.prototype.addFontURLs,{Configuration:a}=MathJax._.input.tex.Configuration,{MapHandler:n}=MathJax._.input.tex.MapHandler,r=MathJax._.input.tex.NodeUtil.default,{getRange:s}=MathJax._.core.MmlTree.OperatorDictionary;t.prototype.addFontURLs=(t,a,n)=>{n=(n=n.split("output"))[0]+"fonts";for(const e of Object.keys(a)){const r={...a[e]};r.src=r.src.replace(/%%URL%%/,n),t[e]=r;}!1!==n&&e.call(this,t,a,n);},a.create("fix-unicode",{fallback:{character:function(t,e){let a=t.stack.env.font?{mathvariant:t.stack.env.font}:{};const o=n.getMap("remap").lookup(e),i=s(e),c=i?.[3]||"mo";let d=t.create("token",c,a,o?o.char:e);i?.[4]&&d.attributes.set("mathvariant",i[4]),"mo"===c&&(r.setProperty(d,"fixStretchy",!0),t.configuration.addNode("fixStretchy",d)),t.Push(d);}}}),MathJax.startup.defaultReady(),MathJax.startup.document.inputJax[0].preFilters.add((({math:t})=>{t.math="\\displaylines{"+t.math+"}";}));}}};},637:()=>{H5P.MathDisplay=function(){"use strict";function t(){var t=this;this.isReady=!1,this.mathjax=void 0,this.observer=void 0,this.updating=null,this.mathHasBeenAdded=!1,H5P.EventDispatcher.call(t),H5P.jQuery(document).ready((function(){t.settings=H5P.getLibraryConfig("H5P.MathDisplay"),t.settings.observers&&0!==t.settings.observers.length||(t.settings=t.extend({observers:[{name:"mutationObserver",params:{cooldown:500}},{name:"domChangedListener"}]},t.settings)),void 0!==t.settings.parent&&console.error("Beep bop! This was disabled since no one knew what it was actually used for @ H5P.MathDisplay"),t.container=t.settings.container||document.getElementsByClassName("h5p-container")[0]||document,function(e){e&&e.config&&(MathJax=t.extend(MathJax,e.config));var a=document.createElement("script");a.type="text/javascript",a.src=H5P.getLibraryPath("H5P.MathDisplay-1.0")+"/dist/mathjax.js",a.async=!0,a.onload=function(){t.mathjax=MathJax,t.settings.observers.forEach((function(e){switch(e.name){case "mutationObserver":t.startMutationObserver(e.params);break;case "domChangedListener":t.startDOMChangedListener(e.params);break;case "interval":t.startIntervalUpdater(e.params);}})),t.isReady=!0;},document.body.appendChild(a);}(t.settings.renderer&&t.settings.renderer.mathjax?t.settings.renderer.mathjax:null),t.update();}));}t.prototype=Object.create(H5P.EventDispatcher.prototype),t.prototype.constructor=t,t.prototype.startDOMChangedListener=function(){var t=this;return H5P.externalDispatcher.on("domChanged",(function(e){t.update();})),!0;},t.prototype.startIntervalUpdater=function(t){var e=this;return !(!t||!t.time)&&(function t(a){setTimeout((function(){e.update(),t(a);}),a);}(t.time),!0);},t.prototype.startMutationObserver=function(t){var a=this;return !!this.container&&(this.mutationCoolingPeriod=t.cooldown,this.observer=new MutationObserver((function(t){e(t)&&(a.mathHasBeenAdded=!0),t.filter((function(t){return t.target.textContent.match(/(?:\$|\\\(|\\\[|\\begin\{.*?})/);})).forEach((function(){a.update();}));})),this.observer.observe(this.container,{childList:!0,subtree:!0}),!0);},t.prototype.update=function(){const t=this;let e=Promise.resolve();if(!this.isReady)return;const n=function(){return e=e.then((()=>{t.mathjax.typesetClear(),t.mathjax.typesetPromise().then((()=>{t.mathHasBeenAdded&&(t.mathHasBeenAdded=!1,a());}));})).catch(((t)=>console.log("Typeset failed: "+t.message))),e;};this.observer?this.updating?this.missedUpdates=!0:(n(),this.updating=setTimeout((function(){t.updating=null,t.missedUpdates&&(t.missedUpdates=!1,n());}),this.mutationCoolingPeriod)):n();},t.prototype.extend=function(){for(var t=1;t<arguments.length;t++)for(var e in arguments[t])arguments[t].hasOwnProperty(e)&&("object"==typeof arguments[0][e]&&"object"==typeof arguments[t][e]?this.extend(arguments[0][e],arguments[t][e]):arguments[0][e]=arguments[t][e]);return arguments[0];};const e=function(t){for(let e=0;e<t.length;e++){for(let a=0;a<t[e].addedNodes.length;a++){const n=t[e].addedNodes[a];if(n instanceof HTMLElement&&(n.classList.contains("MathJax")||n.classList.contains("MathJax_Display")))return !0;}}return !1;},a=function(){try{H5P.instances[0].trigger("resize");}catch(t){}};return t;}(),new H5P.MathDisplay();}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,a),s.exports;}a(453),H5P=H5P||{},H5P.MathDisplay=a(637).default;})();;
